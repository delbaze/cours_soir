<app-header></app-header>
<app-loading-spinner></app-loading-spinner>
<router-outlet />



<div class="container">
    <h1>Ma Todo List</h1>

    <div>
        <input name="inputTache" id="inputTache" [ngModel]="nouvelleTache()" (ngModelChange)="nouvelleTache.set($event)"
            (keyup.enter)="ajouterTache()" placeholder="Nouvelle tâche..." #inputTache>
        <button (click)="(ajouterTache())">
            Ajouter
        </button>
    </div>

    <!-- Statistiques -->
    <div>
        <span>Total</span>
        <span>{{ taches().length}}</span>
    </div>
    <div>
        <span>En cours</span>
        <span>{{ nbEnCours()}}</span>
    </div>
    <div>
        <span>Terminees</span>
        <span>{{ nbTerminees()}}</span>
    </div>

    <!-- Liste des tâches-->

    @if (taches().length === 0) {
    <div>
        <p>Aucune tâche pour le moment</p>
    </div>
    } @else {
    <!-- Liste-->
    <ul>
        @for(tache of taches();track tache.id) {
        <!-- <app-task-item [titre]="tache.titre" [id]="tache.id" [toggleTask]="toggleTerminee.bind(this)"></app-task-item> -->
        <app-task-item [titre]="tache.titre" [id]="tache.id" [terminee]="tache.terminee"
            (taskToggled)="toggleTerminee($event)" (taskSelected)="toggleSelection($event)"
            (taskDel)="supprimerTache($event)"></app-task-item>
        }
    </ul>
    }

    <!-- Nombre de tâches sélectionnées: {{ tachesSelectionnees().length}} -->

    <div>
        <button (click)="toutSupprimer()" [disabled]="taches().length === 0">
            Tout supprimer
        </button>
        <button (click)="supprimerSelectionnees()" [disabled]="taches().length === 0">
            Supprimer les selectionnées
        </button>

    </div>



    <app-timer></app-timer>
    <!-- <app-user-list></app-user-list> -->